Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4

====== v1 ======

|                                            | v1.0 sept 2016 | v1.1 21/07/2017 | v1.2 30/09/2017 | v1.3 03/01/2018 | v1.4 29/06/2018 |
|:-------------------------------------------|:---------------|:----------------|:----------------|:----------------|:----------------|
| 01 Spec aligned with                       | Java EE 7      | Java EE 7       | Java EE 7       | Java EE 7       | Java EE 7       |
| 02 Based on                                | Java SE 8      | Java SE 8       | Java SE 8       | Java SE 8       | Java SE 8       |
| 03 CDI                                     | v1.2           | v1.2            | v1.2            | v1.2            | v1.2            |
| 04 JAX-RS                                  | v2.0           | v2.0.1          | v2.0.1          | v2.0.1          | v2.0.1          |
| 05 JSON-P                                  | v1.0           | v1.0            | v1.0            | v1.0            | v1.0            |
| 06 Common Annotations for Java platform    |                |                 | v1.2            | v1.2            | v1.2            |
| 07 Eclipse MicroProfile Config             |                | v1.0            | v1.1            | v1.2            | v1.3            |
| 08 Eclipse MicroProfile Fault Tolerance    |                |                 | v1.0            | v1.0            | v1.1            |
| 09 Eclipse MicroProfile Health             |                |                 | v1.0            | v1.0            | v1.0            |
| 10 Eclipse MicroProfile JWT Authentication |                |                 | v1.0            | v1.0            | v1.1            |
| 11 Eclipse MicroProfile Metrics            |                |                 | v1.0            | v1.1            | v1.1            |
| 12 Eclipse MicroProfile Open API           |                |                 |                 | v1.0            | v1.0            |
| 13 Eclipse MicroProfile Open tracing       |                |                 |                 | v1.0            | v1.1            |
| 14 Eclipse MicroProfile Rest Client        |                |                 |                 | v1.0            | v1.1            |


===== Eclipse MicroProfile Config =====
[[https://github.com/eclipse/microprofile-config|GitHub repository]]
Configuration de l'app en dehors de l'app.

**Rationale**
The majority of applications need to be configured based on a running environment. It must be possible to modify configuration data from outside an application so that the application itself does not need to be repackaged.
The configuration data can come from different locations and in different formats (e.g. system properties, system environment variables, .properties, .xml, datasource). We call these config locations ConfigSources. If the same property is defined in multiple ConfigSources, we apply a policy to specify which one of the values will effectively be used.
Under some circumstances, some data sources may change dynamically. The changed values should be fed into the client without the need for restarting the application. This requirement is particularly important for microservices running in a cloud environment. The MicroProfile Config approach allows to pick up configured values immediately after they got changed.

**Releases**
* MP v1.1 : [[https://github.com/eclipse/microprofile-config/releases/tag/1.0|Config v1.0]]
* MP v1.2 : [[https://github.com/eclipse/microprofile-config/releases/tag/1.1|Config v1.1]]
* MP v1.3 : [[https://github.com/eclipse/microprofile-config/releases/tag/1.2|Config v1.2]]
* MP v1.4 : [[https://github.com/eclipse/microprofile-config/releases/tag/1.3|Config v1.3]] - [[https://rieckpil.de/whatis-eclipse-microprofile-config/|article]]

**Key points**
* values are read only by design
* several sources, orderd by priority
* Set of converters 

'''
@Inject
@ConfigProperty(name = "foo.bar.url")
private String url;
'''


===== Eclipse MicroProfile Fault Tolerance =====
[[https://github.com/eclipse/microprofile-fault-tolerance/|GitHub repository]]

**Rationale**
Currently there are at least two libraries to provide fault tolerance. It is best to uniform the technologies and define a standard so that micro service applications can adopt and the implementation of fault tolerance can be provided by the containers if possible.

**Releases**
* MP v1.2 : [[https://github.com/eclipse/microprofile-fault-tolerance/releases/tag/1.0|Fault Tolerance v1.0]]
* MP v1.3 : [[https://github.com/eclipse/microprofile-fault-tolerance/releases/tag/1.0|Fault Tolerance v1.0]]
* MP v1.4 : [[https://github.com/eclipse/microprofile-fault-tolerance/releases/tag/1.1|Fault Tolerance v1.1]]

With Istio - https://istio.io
Attention aux interactions entre annotations ! Certanines modifient le comportement d'autres !!!

* ''@Asynchronous'' → MUST return a Future
* ''@retry(retryOn=IOException.class, delay=500, maxRetries=5)''
* ''@fallback(fallbackMethod="myFallback")''
* ''@circuitBreaker(failOn=IOException.class, delay=500)''
* ''@bulkhead'' → éviter de flooder un service avec plein de requetes
* ''@timeout(2000)'' // can trigger ''@Fallback'', ''@Retry''

→ https://github.com/NottyCode/fault-tolerence-examples

===== Eclipse MicroProfile Health =====
[[https://github.com/eclipse/microprofile-health|GitHub repository]]

**Rationale**
Health checks are used to probe the state of a computing node from another machine (i.e. kubernetes service controller) with the primary target being cloud infrastructure environments where automated processes maintain the state of computing nodes.
In this scenario, health checks are used to determine if a computing node needs to be discarded (terminated, shutdown) and eventually replaced by another (healthy) instance.
It’s not intended (although could be used) as a monitoring solution for human operators.

**Releases**
* MP v1.2 : [[https://github.com/eclipse/microprofile-health/releases/tag/1.0|Health Check v1.0]]
* MP v1.3 : [[https://github.com/eclipse/microprofile-health/releases/tag/1.0|Health Check v1.0]]
* MP v1.4 : [[https://github.com/eclipse/microprofile-health/releases/tag/1.0|Health Check v1.0]]

**Key point**
* UP or DOWN
* extra data can be optionally specified (are you close to die?)
* check via HTTP

'''
@Health
public class FooBar implements HealthCheck {}
'''


===== Eclipse MicroProfile JWT Authentication =====
[[https://github.com/eclipse/microprofile-jwt-auth|GitHub repository]]

**Rationale**
Eclipse MicroProfile JWT Authentication provides role based access control (RBAC) microservice endpoints using OpenID Connect (OIDC) and JSON Web Tokens (JWT).

**Releases**
* MP v1.2 : [[https://github.com/eclipse/microprofile-jwt-auth/releases/tag/1.0|JWT Authentication v1.0]]
* MP v1.3 : [[https://github.com/eclipse/microprofile-jwt-auth/releases/tag/1.0|JWT Authentication v1.0]]
* MP v1.4 : [[https://github.com/eclipse/microprofile-jwt-auth/releases/tag/1.1|JWT Authentication v1.1]] - [[https://rieckpil.de/whatis-eclipse-microprofile-jwt-auth/|article]]

''@Claim''

===== Eclipse MicroProfile Metrics =====
[[https://github.com/eclipse/microprofile-metrics|GitHub repository]]

Inspired by Prometheus (and Dropwizard metrics)
(Reply with Prometheus format by default, and JSON (with application/json))

**Rationale**
This specification aims at providing a unified way for Microprofile servers to export Monitoring data ("Telemetry") to management agents and also a unified Java API, that all (application) programmers can use to expose their telemetry data.

**Releases**
* MP v1.2 : [[https://github.com/eclipse/microprofile-metrics/releases/tag/1.0|Metrics v1.0]]
* MP v1.3 : [[https://github.com/eclipse/microprofile-metrics/releases/tag/1.1|Metrics v1.1]]
* MP v1.4 : [[https://github.com/eclipse/microprofile-metrics/releases/tag/1.1|Metrics v1.1]]

''@Counted''
  - monotonic=false : nb ACTUEL d'executions concurrentes de la méthode
  - monotonic=false : nb TOTAL d'executions de la méthode
''@Gauge(unit = MetricUnits.MEGABYTES)'' : sampled value
''@Metered'': durée moyenne
''@Timed'': duration statistics
''@Metric'': 

**3 scopes (registres)**
* Base scope : standard, required CPU, threads, garbadge collector,…
* application scope : number of billings,…
* vendor specific : osgi,…

===== Eclipse MicroProfile Open API =====
[[https://github.com/eclipse/microprofile-open-api|GitHub repository]]

**Rationale**
This MicroProfile specification aims at providing a unified Java API for the OpenAPI v3 specification, that all application developers can use to expose their API documentation.
→ [[https://github.com/OAI/OpenAPI-Specification/tree/master/versions|OpenAPI Specification]] de l'[[https://www.openapis.org|OpenAPI Initiative (OAI)]] ≈ dérivé de Swagger

**Releases**
* MP v1.3 : [[https://github.com/eclipse/microprofile-open-api/releases/tag/1.0|Open API v1.0]]
* MP v1.4 : [[https://github.com/eclipse/microprofile-open-api/releases/tag/1.0|Open API v1.0]]

===== Eclipse MicroProfile OpenTracing (distributed tracing) =====
[[https://github.com/eclipse/microprofile-opentracing|GitHub repository]]

**Rationale**
The MicroProfile OpenTracing specification defines behaviors and an API for accessing an OpenTracing compliant Tracer object within your JAX-RS application. The behaviors specify how incoming and outgoing requests will have OpenTracing Spans automatically created. The API defines how to explicitly disable or enable tracing for given endpoints.

**Releases**
* MP v1.3 : [[https://github.com/eclipse/microprofile-opentracing/releases/tag/1.0|OpenTracing v1.0]]
* MP v1.4 : [[https://github.com/eclipse/microprofile-opentracing/releases/tag/1.1|OpenTracing v1.1]]

* Suivre les appels à travers les différents microservices.

→ Zipkin implementation.

===== Eclipse MicroProfile Rest Client =====
[[https://github.com/eclipse/microprofile-rest-client|GitHub repository]]
[[https://itnext.io/how-to-deal-with-4xx-5xx-responses-in-microprofile-rest-client-2e16559f542|How to deal with 4xx responses in MicroProfile Rest-Client]]

**Rationale**
The MicroProfile Rest Client provides a type-safe approach to invoke RESTful services over HTTP. As much as possible the MP Rest Client attempts to use JAX-RS 2.0 APIs for consistency and easier re-use.

**Releases**
* MP v1.3 : [[https://github.com/eclipse/microprofile-rest-client/releases/tag/microprofile-rest-client-1.0|Rest Client v1.0]]
* MP v1.4 : [[https://github.com/eclipse/microprofile-rest-client/releases/tag/1.1|Rest Client v1.1]]
